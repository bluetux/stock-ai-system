# ğŸ“Œ frontend/Dockerfile
FROM node:20

WORKDIR /app

# package.json ë¨¼ì € ë³µì‚¬í•´ì„œ layer ìºì‹±
COPY package.json package-lock.json ./

# âœ… ëª¨ë“  ì˜ì¡´ì„± ì„¤ì¹˜ (tailwind í¬í•¨)
RUN npm install

ENV NODE_OPTIONS=--openssl-legacy-provider

# ì „ì²´ ì½”ë“œ ë³µì‚¬
COPY . .

# âœ… Tailwind ì„¤ì • íŒŒì¼ ìë™ ìƒì„± (ì´ë¯¸ ìˆë‹¤ë©´ ë¬´ì‹œë¨)
RUN npx tailwindcss init -p || true
# RUN npm install axios

# âœ… index.cssì— tailwind ì§€ì‹œì ì¶”ê°€ (ì´ë¯¸ ìˆë‹¤ë©´ ìƒëµ ê°€ëŠ¥)
RUN grep -q "@tailwind" src/index.css || echo "@tailwind base;\n@tailwind components;\n@tailwind utilities;" > src/index.css

CMD ["npm", "start"]
